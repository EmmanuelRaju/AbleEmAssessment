<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Em Assessment</title>
</head>
<body>
    <form id='inputForm'>
        <textarea type='textarea' name='inputBox' id='inputBox' placeholder='Enter input here...'></textarea>        
        <button type='submit'>Submit</button>
    </form>
</body>
<script>
    let inputForm = document.getElementById('inputForm');
    let response = document.getElementById('inputBox')
       
   
    
let combinationGenerator =(em)=>{
    console.log('m', JSON.parse(em));
    let { name, attributes } = JSON.parse(em)
    console.log(name);

    let testObj = {}

    attributes.map((attribute) => {
        testObj[attribute.name] = attribute.values.map((value) => { return value.name })      
    })

    let test = []
    for(const key in testObj){
        test.push(testObj[key])
    }
    let r = []
    function cartesian(...args) {
        let max = args.length - 1;
        function helper(arr, i) {
            for (let j = 0, l = args[i].length; j < l; j++) {
                let a = arr.slice(0); // clone arr
                a.push(args[i][j]);
                if (i == max)
                    r.push(a);
                else
                    helper(a, i + 1);
            }
        }
        helper([], 0);
        return r;
    }

    cartesian(...test)


    r.forEach(function(el) {
        var div = document.createElement('div');
        div.innerText = el[0];
        document.body.appendChild(div);
    });
 }

let handleForm =(event)=>{ 
        event.preventDefault();
        console.log(response.value);
        let em = response.value
        combinationGenerator(em);
    } 
    inputForm.addEventListener('submit', handleForm);

</script>
</html>